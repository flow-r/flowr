<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>flowr • flowr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="flowr">
<meta property="og:description" content="flowr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flowr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.11</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/flowr_install.html">flowr</a>
    </li>
    <li>
      <a href="../articles/flowr_overview.html">flowr</a>
    </li>
    <li>
      <a href="../articles/flowr_tutorial.html">flowr</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/flow-r/flowr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="flowr_install_files/header-attrs-2.7/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>flowr</h1>
            <h3 class="subtitle">Streamlining Workflows</h3>
                        <h4 class="author">Sahil Seth</h4>
            
            <h4 class="date">2021-03-02</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/flow-r/flowr/blob/master/vignettes/flowr_install.Rmd"><code>vignettes/flowr_install.Rmd</code></a></small>
      <div class="hidden name"><code>flowr_install.Rmd</code></div>

    </div>

    
    
<div id="installation" class="section level1">
<h1 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h1>
<p>Requirements:</p>
<ul>
<li>R version &gt; 3.1, preferred 3.2</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="do">## for a latest released version (from CRAN)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"flowr"</span>, <span class="at">repos =</span> <span class="at">CRAN=</span><span class="st">"http://cran.rstudio.com"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## OR latest version</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>devtools<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"sahilseth/flowr"</span>, <span class="at">ref =</span> <span class="st">"master"</span>)</span></code></pre></div>
<p>After installation run <code><a href="../reference/setup.html">setup()</a></code>, this will copy the flowr’s helper script to <code>~/bin</code>. Please make sure that this folder is in your <code>$PATH</code> variable.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/flow-r/flowr">flowr</a></span><span class="op">)</span>
<span class="fu"><a href="../reference/setup.html">setup</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Running <code>flowr</code> from the terminal should now show the following:</p>
<pre><code>Usage: flowr function [arguments]

status          Detailed status of a flow(s).
rerun           rerun a previously failed flow
kill            Kill the flow, upon providing working directory
fetch_pipes     Checking what modules and pipelines are available; flowr fetch_pipes

Please use 'flowr -h function' to obtain further information about the usage of a specific function.</code></pre>
<p>If you interested, visit <a href="https://github.com/sahilseth/funr">funr’s github page for more details</a></p>
<p>From this step on, one has the option of typing commands in a R console OR a bash shell (command line). For brevity we will show examples using the shell.</p>
</div>
<div id="test" class="section level1">
<h1 class="hasAnchor">
<a href="#test" class="anchor"></a>Test</h1>
<p><strong>Test a small pipeline on the cluster</strong></p>
<p>This will run a three step pipeline, testing several different relationships between jobs. Initially, we can test this locally, and later on a specific HPCC platform.</p>
<pre><code>## This may take about a minute or so.
flowr run x=sleep_pipe platform=local execute=TRUE
## corresponding R command:
run(x='sleep_pipe', platform='local', execute=TRUE)</code></pre>
<p>If this completes successfully, we can try this on a computing cluster; where this would submit a few interconnected jobs.</p>
<p>Several platforms are supported out of the box (torque, moab, sge, slurm and lsf), you may use the platform variable to switch between platforms.</p>
<pre><code>flowr run pipe=sleep_pipe platform=lsf execute=TRUE
## other options for platform: torque, moab, sge, slurm, lsf
## this shows the folder being used as a working directory for this flow.</code></pre>
<p>Once the submission is complete, we can test the status using <code><a href="../reference/status.html">status()</a></code> by supplying it the full path as recovered from the previous step.</p>
<pre><code>flowr status x=~/flowr/runs/sleep_pipe-samp1-20150923-10-37-17-4WBiLgCm

## we expect to see a table like this when is completes successfully:

|               | total| started| completed| exit_status|status    |
|:--------------|-----:|-------:|---------:|-----------:|:---------|
|001.sleep      |     3|       3|         3|           0|completed |
|002.create_tmp |     3|       3|         3|           0|completed |
|003.merge      |     1|       1|         1|           0|completed |
|004.size       |     1|       1|         1|           0|completed |

## Also we expect a few files to be created:
ls ~/flowr/runs/sleep_pipe-samp1-20150923-10-37-17-4WBiLgCm/tmp
samp1_merged  samp1_tmp_1  samp1_tmp_2  samp1_tmp_3

## If both these checks are fine, we are all set !</code></pre>
<p>There are a few places where things may go wrong, you may follow the advanced configuration guide for more details. Feel free to post questions on <a href="https://github.com/flow-r/flowr/issues">github issues page</a>.</p>
</div>
<div id="advanced-configuration" class="section level1">
<h1 class="hasAnchor">
<a href="#advanced-configuration" class="anchor"></a>Advanced Configuration</h1>
<div id="hpcc-support-overview" class="section level2">
<h2 class="hasAnchor">
<a href="#hpcc-support-overview" class="anchor"></a>HPCC Support Overview</h2>
<p>Support for several popular cluster platforms is built-in. There is a template, for each platform, which should work out of the box. Further, one may copy and edit them (and save to <code>~/flowr/conf</code>) in case some changes are required. Templates from this folder (<code>~/flowr/conf</code>), would override defaults.</p>
<p>Here are links to latest templates on github:</p>
<ul>
<li><a href="https://github.com/flow-r/flowr/blob/master/inst/conf/torque.sh">torque</a></li>
<li><a href="https://github.com/flow-r/flowr/blob/master/inst/conf/lsf.sh">lsf</a></li>
<li><a href="https://github.com/flow-r/flowr/blob/master/inst/conf/moab.sh">moab</a></li>
<li><a href="https://github.com/flow-r/flowr/blob/master/inst/conf/sge.sh">sge</a></li>
<li>
<a href="https://github.com/flow-r/flowr/blob/master/inst/conf/slurm.sh">slurm</a>, needs testing</li>
</ul>
<p><strong>Not sure what platform you have?</strong></p>
<p>You may check the version by running ONE of the following commands:</p>
<pre><code>msub --version
## Version: **moab** client 8.1.1
man bsub
##Submits a job to **LSF** by running the specified
qsub --help</code></pre>
<p>Here are some helpful guides and details on the platforms:</p>
<ul>
<li>PBS: <a href="https://en.wikipedia.org/wiki/Portable_Batch_System">wiki</a>
</li>
<li>Torque: <a href="https://en.wikipedia.org/wiki/TORQUE_Resource_Manager">wiki</a>
<ul>
<li>MD Anderson</li>
</ul>
</li>
<li>LSF <a href="https://en.wikipedia.org/wiki/Platform_LSF">wiki</a>:
<ul>
<li>Also used at <a href="https://software.broadinstitute.org/gatk/guide/article?id=1311">Broad</a>
</li>
</ul>
</li>
<li>SGE <a href="https://en.wikipedia.org/wiki/Sun_Grid_Engine">wiki</a>
<ul>
<li>A tutorial for <a href="https://sites.google.com/site/anshulkundaje/inotes/programming/clustersubmit/sun-grid-engine">Sun Grid Engine</a>
</li>
<li>Another from <a href="http://www.biostat.jhsph.edu/bit/cluster-usage.html">JHSPH</a>
</li>
<li>Dependency info <a href="https://wiki.duke.edu/display/SCSC/SGE+Job+Dependencies">here</a>
</li>
</ul>
</li>
<li>
<a href="https://slurm.schedmd.com/documentation.html">SLURM</a>:
<ul>
<li>quick start: <a href="https://slurm.schedmd.com/quickstart.html">SLURM</a>
</li>
</ul>
</li>
</ul>
<p><a href="https://en.wikipedia.org/wiki/Comparison_of_cluster_software">Comparison_of_cluster_software</a></p>
</div>
<div id="flowr-configuration-file" class="section level2">
<h2 class="hasAnchor">
<a href="#flowr-configuration-file" class="anchor"></a>flowr configuration file</h2>
<p><strong>This needs expansion</strong></p>
<p>flowr has a configuration file, with parameters regarding default paths, verboseness etc. flowr loads this default configuration from the package installation. In addition, to customize the parameters, simply create a tab-delimited file called <code>~/.flowr</code>. An example of this file is available <a href="https://github.com/flow-r/flowr/blob/master/inst/conf/flowr.conf">here</a></p>
<p><strong>Additional files loaded if available</strong>:</p>
<ul>
<li>(flow installation)/flowr.conf</li>
<li>(ngsflows installation)/ngsflows.conf</li>
<li><code>~/flowr/conf/flowr.conf</code></li>
<li><code>~/.flowr</code></li>
</ul>
</div>
</div>
<div id="troubleshooting-faqs" class="section level1">
<h1 class="hasAnchor">
<a href="#troubleshooting-faqs" class="anchor"></a>Troubleshooting &amp; FAQs</h1>
<div id="errors-in-job-submission" class="section level2">
<h2 class="hasAnchor">
<a href="#errors-in-job-submission" class="anchor"></a>Errors in job submission</h2>
<div class="alert alert-warning" role="alert">
<p>Possible issue: Jobs are not getting submitted</p>
</div>
<div class="alert alert-info" role="alert">
<ol style="list-style-type: decimal">
<li>Check if the right platform was used for submission.</li>
<li>Confirm (with your system admin) that you have the privilege to submit jobs.</li>
<li>
<strong>Use a custom flowdef</strong>: Many institutions have strict specification on the resource reservations. Make sure that the queue, memory, walltime, etc. requirements are specified properly</li>
<li>
<strong>Use a custom submission template</strong>: There are several parameters in the submission script used to submit jobs to the cluster. You may customize this template to suit your needs.</li>
</ol>
</div>
<p><strong>3. Use a custom flowdef</strong></p>
<p>We can copy an example flow definition and customize it to suit our needs. This a tab delimited text file, so make sure that the format is correct after you make any changes.</p>
<pre><code>cd ~/flowr/pipelines
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/pipelines/sleep_pipe.def
## check the format
flowr as.flowdef x=~/flowr/pipelines/sleep_pipe.def</code></pre>
<p><em>Run the test with a custom flowdef</em>:</p>
<pre><code>flowr run x=sleep_pipe execute=TRUE def=~/flowr/pipelines/sleep_pipe.def ## platform=lsf [optional, picked up from flowdef]</code></pre>
<p><strong>4. Use a custom submission template</strong></p>
<p>If you need to customize the HPCC submission template, copy the <a href="https://github.com/flow-r/flowr/tree/master/inst/conf">file for your platform</a> and make your desired changes. For example the MOAB based cluster in our institution does <strong>not</strong> accept the <code>queue</code> argument, so we need to comment it out.</p>
<p><em>Download the template for a specific HPCC platform</em> into <code>~/flowr/conf</code></p>
<pre><code>cd ~/flowr/conf ## flowr automatically picks up a template from this folder.
## for MOAB (msub)
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/conf/moab.sh
## for Torque (qsub)
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/conf/torque.sh
## for IBM LSF (bsub)
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/conf/lsf.sh
## for SGE (qsub)
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/conf/sge.sh
## for SLURM (sbatch) [untested]
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/conf/slurm.sh</code></pre>
<p>Make the desired changes using your favourite editor and submit again.</p>
<div class="alert alert-warning" role="alert">
<p>Possible issue: Jobs for subsequent steps are not submitting (though first step works fine).</p>
</div>
<div class="alert alert-info" role="alert">
<ol style="list-style-type: decimal">
<li>
<strong>Confirm jobids are parsing fine</strong>: Flowr parses the computing platform’s output and extracts job IDs of submitted jobs.</li>
<li>
<strong>Check dependency string</strong>:</li>
</ol>
</div>
<p><strong>1. Parsing job ids</strong></p>
<p>Flowr parses job IDs to keep a log of all submitted jobs, and also to pass them along as a dependency to subsequent jobs. This is taken care by the <a href="https://github.com/flow-r/flowr/blob/master/R/parse-jobids.R">parse_jobids()</a> function. Each job scheduler shows the jobs id, when you submit a job, but it may show it in a slightly different fashion. To accommodate this one can use regular expressions as described in the relevant section of the <a href="https://github.com/flow-r/flowr/blob/master/inst/conf/flowr.conf">flowr config</a>.</p>
<p>For example LSF may show a string such as:</p>
<pre><code>Job &lt;335508&gt; is submitted to queue &lt;transfer&gt;.
## test if it parses correctly
jobid="Job &lt;335508&gt; is submitted to queue &lt;transfer&gt;."
set_opts(flow_parse_lsf = ".*(\&lt;[0-9]*\&gt;).*")
parse_jobids(jobid, platform="lsf")
[1] "335508"</code></pre>
<p>In this case <em>335508</em> was the job id and regex worked well !</p>
<p>Once we identify the correct regex for the platform you may update the configuration file with it.</p>
<pre><code>cd ~/flowr/conf 
wget https://raw.githubusercontent.com/sahilseth/flowr/master/inst/conf/flowr.conf
## flowr automatically reads from this location, if you prefer to put it elsewhere, use
load_opts("flowr.conf") ## visit sahilseth.github.io/params for more details.</code></pre>
<p>Update the regex pattern and submit again.</p>
<p><strong>2. Check dependency string</strong></p>
<p>After collecting job ids from previous jobs, flowr renders them as a dependency for subsequent jobs. This is handled by <a href="https://github.com/flow-r/flowr/blob/master/R/render-dependency.R">render_dependency.PLATFORM</a> functions.</p>
<p>Confirm that the dependency parameter is specified correctly in the submission scripts:</p>
<pre><code>wd=~/flowr/runs/sleep_pipe-samp1-20150923-11-20-39-dfvhp5CK ## path to the most recent submission
cat $wd/002.create_tmp/create_tmp_cmd_1.sh</code></pre>
<div id="flowr-configuration-file-1" class="section level4">
<h4 class="hasAnchor">
<a href="#flowr-configuration-file-1" class="anchor"></a>Flowr Configuration file</h4>
<div class="alert alert-warning" role="alert">
<p>Possible issue: Flowr shows too much OR too little information.</p>
</div>
<p>There are several <a href="http://flow-r.github.io/flowr/rd.html#verbose">verbose levels</a> available (0, 1, 2, 3, …)</p>
<p>One can change the verbose levels in this file (<code>~/flowr/conf/flowr.conf</code>) and check <a href="http://flow-r.github.io/flowr/rd.html#verbose">verbosity</a> section in the help pages for more details.</p>
</div>
</div>
<div id="flowdef-resource-columns" class="section level2">
<h2 class="hasAnchor">
<a href="#flowdef-resource-columns" class="anchor"></a>Flowdef resource columns</h2>
<div class="alert alert-warning" role="alert">
<p>Possible issue: What all resources are supported in the flow definition?</p>
</div>
<p>The resource requirement columns of flow definition are passed along to the final (cluster) submission script. For example values in <code>cpu_reserved</code> column would be populated as <code>{{{CPU}}}</code> in the submission template.</p>
<p>The following table provides a mapping between the flow definition columns and variables in the <a href="https://github.com/flow-r/flowr/tree/master/inst/conf">submission templates</a>:</p>
<table class="table">
<thead><tr class="header">
<th align="left">flowdef variable</th>
<th align="left">submission template variable</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">nodes</td>
<td align="left">NODES</td>
</tr>
<tr class="even">
<td align="left">cpu_reserved</td>
<td align="left">CPU</td>
</tr>
<tr class="odd">
<td align="left">memory_reserved</td>
<td align="left">MEMORY</td>
</tr>
<tr class="even">
<td align="left">email</td>
<td align="left">EMAIL</td>
</tr>
<tr class="odd">
<td align="left">walltime</td>
<td align="left">WALLTIME</td>
</tr>
<tr class="even">
<td align="left">extra_opts</td>
<td align="left">EXTRA_OPTS</td>
</tr>
<tr class="odd">
<td align="left">*</td>
<td align="left">JOBNAME</td>
</tr>
<tr class="even">
<td align="left">*</td>
<td align="left">STDOUT</td>
</tr>
<tr class="odd">
<td align="left">*</td>
<td align="left">CWD</td>
</tr>
<tr class="even">
<td align="left">*</td>
<td align="left">DEPENDENCY</td>
</tr>
<tr class="odd">
<td align="left">*</td>
<td align="left">TRIGGER</td>
</tr>
<tr class="even">
<td align="left">**</td>
<td align="left">CMD</td>
</tr>
</tbody>
</table>
<p><code>* These are generated on the fly</code> and <code>** This is gathered from flow mat</code></p>
</div>
<div id="adding-a-new-platform" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-a-new-platform" class="anchor"></a>Adding a new platform</h2>
<div class="alert alert-warning" role="alert">
<p>Possible issue: Need to add a new platform</p>
</div>
<p>Adding a new platform involves <a href="https://github.com/flow-r/flowr/issues/7">a few steps</a>, briefly we need to consider the following steps where changes would be necessary.</p>
<ol style="list-style-type: decimal">
<li><p><strong>job submission</strong>: One needs to add a new template for the new platform. Several <a href="https://github.com/flow-r/flowr/tree/master/inst/conf">examples</a> are available as described in the previous section.</p></li>
<li><p><strong>parsing job ids</strong>: flowr keeps a log of all submitted jobs, and also to pass them along as a dependency to subsequent jobs. This is taken care by the <a href="https://github.com/flow-r/flowr/blob/master/R/parse-jobids.R">parse_jobids()</a> function. Each job scheduler shows the jobs id, when you submit a job, but each shows it in a slightly different pattern. To accommodate this one can use regular expressions as described in the relevant section of the <a href="https://github.com/flow-r/flowr/blob/master/inst/conf/flowr.conf">flowr config</a>.</p></li>
<li><p><strong>render dependency</strong>: After collecting job ids from previous jobs, flowr renders them as a dependency for subsequent jobs. This is handled by <a href="https://github.com/flow-r/flowr/blob/master/R/render-dependency.R">render_dependency.PLATFORM</a> functions.</p></li>
<li><p><strong>recognize new platform</strong>: Flowr needs to be made aware of the new platform, for this we need to add a new class using the platform name. This is essentially a wrapper around the <a href="https://github.com/flow-r/flowr/blob/master/R/class-def.R">job class</a></p></li>
</ol>
<p>Essentially this requires us to add a new line like: <code>setClass("torque", contains = "job")</code>.</p>
<ol start="5" style="list-style-type: decimal">
<li>
<strong>killing jobs</strong>: Just like submission flowr needs to know what command to use to kill jobs. This is defined in detect_kill_cmd function.</li>
</ol>
<p>There are several <a href="https://en.wikipedia.org/wiki/Job_scheduler">job scheduling</a> systems available and we try to support the major players. Adding support is quite easy if we have access to them. Your favourite not in the list? re-open this issue, with details on the platform: <a href="https://github.com/flow-r/flowr/issues/7">adding platforms</a></p>
<div class="alert alert-warning" role="alert">
<p>Possible issue: For other issues upload the error shown in the out files to <a href="https://github.com/flow-r/flowr/issues">github issues tracker</a>.</p>
</div>
<pre><code>## outfiles end with .out, and are placed in a folder like 00X.&lt;jobname&gt;/
## here is one example:
cat $wd/002.create_tmp/create_tmp_cmd_1.out
## final script:
cat $wd/002.create_tmp/create_tmp_cmd_1.sh</code></pre>
</div>
<div id="installation-error-github" class="section level2">
<h2 class="hasAnchor">
<a href="#installation-error-github" class="anchor"></a>Installation Error (Github)</h2>
<pre><code>devtools:::install_github(“sahilseth/flowr”)
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed</code></pre>
<p>Solution:</p>
<p>This is basically a issue with httr (link) Try this:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("RCurl")
devtools:::install_github("sahilseth/flowr")</a></code></pre>
<p>If not then try this: install.packages(“httr”);</p>
<pre><code><a href="https://httr.r-lib.org/">library(httr);
set_config( config( ssl.verifypeer = 0L ) )
devtools:::install_github("sahilseth/flowr")</a></code></pre>
<script src="files/googl.js"></script>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sahil Seth.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
